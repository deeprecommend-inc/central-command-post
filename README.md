# é‡ˆè¿¦AI (Shaka AI) v2.0

**è‡ªç„¶è¨€èªã§SNSã‚’æ“ä½œã™ã‚‹æ¬¡ä¸–ä»£AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**

YouTubeã€X (Twitter)ã€Instagramã€TikTokã‚’**ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ™ãƒ¼ã‚¹**ã§è‡ªå‹•æ“ä½œã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

## âœ¨ ä¸»ãªç‰¹å¾´

### ğŸ¯ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ™ãƒ¼ã‚¹æ“ä½œ

```bash
"YouTubeã§AIã«é–¢ã™ã‚‹å‹•ç”»ã‚’æ¤œç´¢ã—ã¦ã€ä¸Šä½5ä»¶ã«ã„ã„ã­ã—ã¦"
"Xã§æœ€æ–°ã®ãƒ†ãƒƒã‚¯ç³»ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’ãƒªãƒ„ã‚¤ãƒ¼ãƒˆã—ã¦"
"Instagramã§#æ—…è¡Œã®ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã‚’æ¤œç´¢ã—ã¦ã€è‰¯ã„å†™çœŸ10ä»¶ã«ã„ã„ã­ã—ã¦"
```

**è‡ªç„¶è¨€èªã®ã‚¿ã‚¹ã‚¯æŒ‡ç¤ºã ã‘ã§ã€LLMãŒè‡ªå‹•çš„ã«ãƒ–ãƒ©ã‚¦ã‚¶ã‚’æ“ä½œã—ã¾ã™ã€‚**

### ğŸ¤– Browser-Use ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

- **OAuthä¸è¦**: ãƒ¦ãƒ¼ã‚¶ãƒ¼å/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ç›´æ¥ãƒ­ã‚°ã‚¤ãƒ³
- **LLMåˆ¤æ–­**: çŠ¶æ³ã«å¿œã˜ã¦æŸ”è»Ÿã«æ“ä½œ
- **çµ±ä¸€API**: å…¨ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§åŒã˜ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- **ã‚¹ãƒ†ãƒ«ã‚¹å¯¾å¿œ**: Browser Use Cloudã§botæ¤œå‡ºå›é¿

## ä¸»è¦æ©Ÿèƒ½

### 1. ãƒãƒ«ãƒãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œï¼ˆãƒ–ãƒ©ã‚¦ã‚¶è‡ªå‹•åŒ–ï¼‰

#### YouTube
- âœ… Gmailç”Ÿæˆï¼ˆé›»è©±ç•ªå·èªè¨¼å›é¿ï¼‰
- âœ… ãƒ­ã‚°ã‚¤ãƒ³
- âœ… å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- âœ… ã„ã„ã­ / ã‚³ãƒ¡ãƒ³ãƒˆ / ãƒãƒ£ãƒ³ãƒãƒ«ç™»éŒ²
- âœ… æ¤œç´¢ / ãƒãƒ£ãƒ³ãƒãƒ«æƒ…å ±å–å¾—

#### X (Twitter)
- âœ… ãƒ­ã‚°ã‚¤ãƒ³
- âœ… ãƒ„ã‚¤ãƒ¼ãƒˆæŠ•ç¨¿
- âœ… ã„ã„ã­ / ãƒªãƒ„ã‚¤ãƒ¼ãƒˆ / è¿”ä¿¡
- âœ… ãƒ•ã‚©ãƒ­ãƒ¼
- âœ… æ¤œç´¢ / ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—

#### Instagram
- âœ… ãƒ­ã‚°ã‚¤ãƒ³
- âœ… å†™çœŸæŠ•ç¨¿
- âœ… ã„ã„ã­ / ã‚³ãƒ¡ãƒ³ãƒˆ / ãƒ•ã‚©ãƒ­ãƒ¼
- âœ… ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°æ¤œç´¢
- âœ… DMé€ä¿¡

#### TikTok
- âœ… ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²

### 2. å®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³
- **Browser Automation**: Playwrightå®Œå…¨ãƒ–ãƒ©ã‚¦ã‚¶æ“ä½œï¼ˆæ¨å¥¨ï¼‰
- **Muloginé€£æº**: ãƒ–ãƒ©ã‚¦ã‚¶æŒ‡ç´‹ç®¡ç†ï¼ˆæ¤œçŸ¥å›é¿ï¼‰
- **BrightDataé€£æº**: ãƒ¬ã‚¸ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«/ãƒ¢ãƒã‚¤ãƒ«ãƒ—ãƒ­ã‚­ã‚·ï¼ˆIPãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰

### 3. å¤§è¦æ¨¡ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç”Ÿæˆ
- **å¯¾å¿œè¦æ¨¡**: 10,000 ã€œ 1,000,000 ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- **Gmailç”Ÿæˆ**: é›»è©±ç•ªå·èªè¨¼å›é¿æˆ¦ç•¥å®Ÿè£…æ¸ˆã¿
- **ãƒšãƒ«ã‚½ãƒŠãƒ™ãƒ¼ã‚¹**: å„ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ç•°ãªã‚‹äººæ ¼ãƒ»è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³
- **ãƒ—ãƒ­ã‚­ã‚·ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³**: 1ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ1IPï¼ˆå›ºå®šã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰
- **åŒæ™‚ç”Ÿæˆæ•°**: æœ€å¤§50ä¸¦åˆ—

### 3. AIç”Ÿæˆæ©Ÿèƒ½
- Claude APIçµ±åˆ
- è¿”ä¿¡å€™è£œç”Ÿæˆ (äººæ‰‹æ‰¿èªå¿…é ˆ)
- æŠ•ç¨¿æ¡ˆã€ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°æ¡ˆç”Ÿæˆ
- å®‰å…¨ãƒ•ã‚£ãƒ«ã‚¿ã€é‡è¤‡ãƒã‚§ãƒƒã‚¯

### 4. 16åˆ†é¡ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ 
Botæ¤œçŸ¥å›é¿ã®ãŸã‚ã®è©³ç´°ãªè¦³æ¸¬:
1. IPæ§‹é€ 
2. é€šä¿¡ãƒªã‚ºãƒ 
3. æš—å·/ãƒ—ãƒ­ãƒˆã‚³ãƒ«
4. User Agent
5. æŒ‡ç´‹
6. Cookie/ä¿å­˜
7. JavaScript
8. ãƒã‚¦ã‚¹/ãƒã‚¤ãƒ³ã‚¿
9. ãƒ†ãƒ³ãƒ
10. ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
11. ãƒ˜ãƒƒãƒ€
12. ãƒ‡ãƒ¼ã‚¿é€ä¿¡
13. CAPTCHAå¾ŒæŒ™å‹•
14. ä¸€è²«æ€§
15. åˆ†æ•£
16. è‡ªå‹•å­¦ç¿’å¯¾å¿œ

### 5. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- OAuth ãƒˆãƒ¼ã‚¯ãƒ³æš—å·åŒ–
- WORMç›£æŸ»ãƒ­ã‚° (ä¸å¯é€†)
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™éµå®ˆ
- Kill Switchæ©Ÿèƒ½

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
[React/Next.js] â”€RESTâ†’ [FastAPI] â”€â†’ [Redis(Queue+Rate)]
                           â”‚
                      [Workers(Python)]
                           â”‚
              [SNS API / Internal QA Domain]
                           â”‚
         [PostgreSQL] + [WORM Audit Storage]
```

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶
- Docker & Docker Compose
- Node.js 18+ (ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã®å ´åˆ)
- Python 3.11+ (ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã®å ´åˆ)

### 1. ç’°å¢ƒå¤‰æ•°è¨­å®š

```bash
cp .env.example .env
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã¦å„APIã‚­ãƒ¼ã‚’è¨­å®š
```

### 2. èµ·å‹• (è‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½¿ç”¨)

```bash
./start.sh
```

ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ä»¥ä¸‹ã‚’è‡ªå‹•çš„ã«å®Ÿè¡Œã—ã¾ã™:
- ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯ (Docker, Docker Compose)
- ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèªãƒ»ä½œæˆ
- æ—¢å­˜ã‚³ãƒ³ãƒ†ãƒŠã®åœæ­¢
- ã‚µãƒ¼ãƒ“ã‚¹ã®èµ·å‹•
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–
- èµ·å‹•ç¢ºèª

ã‚µãƒ¼ãƒ“ã‚¹ãŒèµ·å‹•ã—ã¾ã™:
- Backend API: http://localhost:8006
- Frontend: http://localhost:3006
- PostgreSQL: localhost:5432
- Redis: localhost:6379

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³
```bash
./start.sh -f           # ãƒ­ã‚°ã‚’è‡ªå‹•çš„ã«è¡¨ç¤º
./start.sh --skip-checks # ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯ã‚’ã‚¹ã‚­ãƒƒãƒ—
./start.sh -h           # ãƒ˜ãƒ«ãƒ—è¡¨ç¤º
```

### 3. æ‰‹å‹•èµ·å‹• (å¾“æ¥ã®æ–¹æ³•)

```bash
# Dockerèµ·å‹•
docker-compose up -d

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–
docker-compose exec backend python -c "from app.models.database import init_db; import asyncio; asyncio.run(init_db())"
```

## ä½¿ç”¨æ–¹æ³•

### ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
http://localhost:3006 ã«ã‚¢ã‚¯ã‚»ã‚¹

- KPIã‚«ãƒ¼ãƒ‰è¡¨ç¤º
- å½“æ—¥ã®ã‚­ãƒ¥ãƒ¼çŠ¶æ³
- æ‰¿èªå¾…ã¡ã‚¢ã‚¤ãƒ†ãƒ 
- ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

### OAuthæ¥ç¶šè¨­å®š

1. å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®é–‹ç™ºè€…ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚¢ãƒ—ãƒªä½œæˆ
2. ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURIã‚’è¨­å®š: `http://localhost:8006/oauth/{platform}/callback`
3. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIDã¨ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’`.env`ã«è¨­å®š
4. UIã‹ã‚‰æ¥ç¶š: OAuthæ¥ç¶š â†’ ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é¸æŠ â†’ èªå¯

### å®Ÿè¡Œä½œæˆ

1. **å®Ÿè¡Œä½œæˆ**ãƒšãƒ¼ã‚¸ã¸
2. ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é¸æŠ
3. å®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³é¸æŠ (API Fastæ¨å¥¨)
4. ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®š
5. ãƒ¬ãƒ¼ãƒˆãƒ»ãƒšãƒ¼ã‚¹è¨­å®š
6. 16åˆ†é¡ç›£è¦–ã—ãã„å€¤è¨­å®š
7. Custom Promptå…¥åŠ›
8. å®Ÿè¡Œ

### æ‰¿èªãƒ•ãƒ­ãƒ¼

1. **æ‰¿èªã‚­ãƒ¥ãƒ¼**ãƒšãƒ¼ã‚¸ã¸
2. AIç”Ÿæˆæ¡ˆã‚’ç¢ºèª
3. æ‰¿èª/ç·¨é›†/å·®æˆ»ã—

## API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### OAuth
- `GET /oauth/{platform}/connect` - OAuthæ¥ç¶šé–‹å§‹
- `GET /oauth/{platform}/callback` - OAuth ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
- `GET /oauth/{platform}/status` - æ¥ç¶šçŠ¶æ…‹ç¢ºèª
- `POST /oauth/{platform}/disconnect/{account_id}` - æ¥ç¶šè§£é™¤

### Runs (å®Ÿè¡Œ)
- `POST /runs/` - Runä½œæˆ
- `GET /runs/{run_id}` - Runè©³ç´°å–å¾—
- `GET /runs/` - Runä¸€è¦§å–å¾—
- `PATCH /runs/{run_id}` - Runæ›´æ–°
- `POST /runs/{run_id}/kill` - Kill Switchç™ºå‹•
- `POST /runs/{run_id}/enqueue` - ã‚¸ãƒ§ãƒ–ã‚’ã‚­ãƒ¥ãƒ¼ã«è¿½åŠ 

### AI Drafts
- `POST /drafts/generate` - AIç”Ÿæˆ
- `GET /drafts/{draft_id}` - Draftè©³ç´°å–å¾—
- `GET /drafts/` - Draftä¸€è¦§å–å¾—
- `POST /drafts/{draft_id}/approve` - Draftæ‰¿èª
- `POST /drafts/{draft_id}/reject` - Draftæ‹’å¦

### Metrics
- `GET /metrics/kpi` - KPIãƒ¡ãƒˆãƒªã‚¯ã‚¹å–å¾—
- `GET /metrics/execution-stats` - å®Ÿè¡Œçµ±è¨ˆå–å¾—
- `GET /metrics/observability` - ç›£è¦–ãƒ¡ãƒˆãƒªã‚¯ã‚¹å–å¾—
- `GET /metrics/dashboard` - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚µãƒãƒªå–å¾—

### Campaigns
- `POST /schedules/campaigns` - ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ä½œæˆ
- `GET /schedules/campaigns/{campaign_id}` - ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³è©³ç´°å–å¾—
- `GET /schedules/campaigns` - ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ä¸€è¦§å–å¾—
- `PATCH /schedules/campaigns/{campaign_id}` - ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³æ›´æ–°
- `DELETE /schedules/campaigns/{campaign_id}` - ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³å‰Šé™¤

## ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ«
- `accounts` - SNSã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±
- `runs` - å®Ÿè¡Œè¨­å®š
- `run_events` - å®Ÿè¡Œã‚¤ãƒ™ãƒ³ãƒˆå±¥æ­´
- `ai_drafts` - AIç”Ÿæˆæ¡ˆ
- `kpi_snapshots` - KPIã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ
- `audit_worm` - WORMç›£æŸ»ãƒ­ã‚°
- `observability_metrics` - ç›£è¦–ãƒ¡ãƒˆãƒªã‚¯ã‚¹
- `campaigns` - ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³
- `kill_switches` - Kill Switch

## ç›£è¦–ã—ãã„å€¤è¨­å®š

16åˆ†é¡ã®ç›£è¦–é …ç›®ã¯`observability_json`ã«è¨­å®š:

```json
{
  "ip_structure": {
    "ip_ua_inconsistency_sigma": 2.5,
    "geo_mismatch_pct": 5.0,
    "asn_bias_pct": 60.0,
    "residential_ratio_min": 30.0
  },
  "rhythm": {
    "interval_periodicity_score": 75.0,
    "persistent_conn_ratio_min": 40.0,
    "simul_conn_per_ip_max": 4
  },
  ...
}
```

è©³ç´°ã¯ä»•æ§˜æ›¸ã®ã€Œä»˜éŒ²A: 16åˆ†é¡â†’è¦³æ¸¬ã‚­ãƒ¼å®Œå…¨å¯¾å¿œè¡¨ã€ã‚’å‚ç…§ã€‚




### æ¨å¥¨äº‹é …
- ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè‡ªå‹•ç”Ÿæˆ
- æˆã‚Šã™ã¾ã—
- æ¤œçŸ¥å›é¿ç›®çš„ã®æ‚ªç”¨
- CAPTCHAå›é¿
- ã‚¯ãƒªãƒƒã‚¯æ°´å¢—ã—
- è¦ç´„é•åè¡Œç‚º
- OAuthæ¥ç¶šæ¸ˆã¿ã®è‡ªç¤¾ãƒ»åŒæ„æ¸ˆã¿ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã¿ä½¿ç”¨
- æ‰¿èªãƒ•ãƒ­ãƒ¼ã‚’å¿…ãšæœ‰åŠ¹åŒ–
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚’éµå®ˆ
- ç›£æŸ»ãƒ­ã‚°ã‚’å®šæœŸçš„ã«ç¢ºèª
- Kill Switchã‚’é©åˆ‡ã«æ´»ç”¨

## ç®¡ç†ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ä»¥ä¸‹ã®ç®¡ç†ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™:

### start.sh - èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
ã‚·ã‚¹ãƒ†ãƒ ã‚’èµ·å‹•ã—ã€è‡ªå‹•çš„ã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚

```bash
./start.sh              # é€šå¸¸èµ·å‹•
./start.sh -f           # ãƒ­ã‚°ã‚’è¡¨ç¤ºã—ãªãŒã‚‰èµ·å‹•
./start.sh --skip-checks # ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯ã‚’ã‚¹ã‚­ãƒƒãƒ—
```

### stop.sh - åœæ­¢ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
ã‚·ã‚¹ãƒ†ãƒ ã‚’åœæ­¢ã—ã¾ã™ã€‚

```bash
./stop.sh               # ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢ (ãƒ‡ãƒ¼ã‚¿ã¯ä¿æŒ)
./stop.sh --volumes     # ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢ + ãƒ‡ãƒ¼ã‚¿å‰Šé™¤
./stop.sh --clean       # å®Œå…¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
./stop.sh --status      # ç¾åœ¨ã®çŠ¶æ…‹ç¢ºèª
```

### logs.sh - ãƒ­ã‚°è¡¨ç¤ºã‚¹ã‚¯ãƒªãƒ—ãƒˆ
å„ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ­ã‚°ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

```bash
./logs.sh               # å…¨ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ­ã‚°è¡¨ç¤º
./logs.sh backend       # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã¿
./logs.sh frontend      # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã¿
./logs.sh worker        # ãƒ¯ãƒ¼ã‚«ãƒ¼ã®ã¿
./logs.sh -f            # ãƒ­ã‚°ã‚’ãƒ•ã‚©ãƒ­ãƒ¼
./logs.sh backend -n 50 # æœ€å¾Œã®50è¡Œã‚’è¡¨ç¤º
```

### reset.sh - ãƒªã‚»ãƒƒãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
ã‚·ã‚¹ãƒ†ãƒ ã‚’å®Œå…¨ã«ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ï¼ˆå…¨ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ï¼‰ã€‚

```bash
./reset.sh              # å®Œå…¨ãƒªã‚»ãƒƒãƒˆï¼ˆç¢ºèªã‚ã‚Šï¼‰
```

### cleanup-ports.sh - ãƒãƒ¼ãƒˆã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
ãƒãƒ¼ãƒˆç«¶åˆã‚’è§£æ±ºã—ã¾ã™ï¼ˆã‚¯ã‚¤ãƒƒã‚¯ãƒ•ã‚£ãƒƒã‚¯ã‚¹ï¼‰ã€‚

```bash
./cleanup-ports.sh      # ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨ä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹/ã‚³ãƒ³ãƒ†ãƒŠã‚’åœæ­¢
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼
```bash
docker-compose restart postgres
./logs.sh postgres
```

### Redisæ¥ç¶šã‚¨ãƒ©ãƒ¼
```bash
docker-compose restart redis
./logs.sh redis
```

### ãƒ¯ãƒ¼ã‚«ãƒ¼ãŒå‹•ä½œã—ãªã„
```bash
./logs.sh worker
docker-compose restart worker
```

### OAuthæ¥ç¶šå¤±æ•—
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆID/ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ç¢ºèª
- ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURIãŒæ­£ã—ã„ã‹ç¢ºèª: `http://localhost:8006/oauth/{platform}/callback`
- ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®APIåˆ¶é™ã‚’ç¢ºèª

### ãƒãƒ¼ãƒˆç«¶åˆã‚¨ãƒ©ãƒ¼
```bash
# ã‚¯ã‚¤ãƒƒã‚¯ãƒ•ã‚£ãƒƒã‚¯ã‚¹
./cleanup-ports.sh
./start.sh

# ã¾ãŸã¯å®Œå…¨ãƒªã‚»ãƒƒãƒˆ
./reset.sh
./start.sh
```

### ã‚µãƒ¼ãƒ“ã‚¹ãŒèµ·å‹•ã—ãªã„
```bash
# å®Œå…¨ãƒªã‚»ãƒƒãƒˆã—ã¦å†èµ·å‹•
./reset.sh
./start.sh
```

### ãƒ­ã‚°ã®ç¢ºèª
```bash
# å…¨ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ­ã‚°
./logs.sh -f

# ç‰¹å®šã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ­ã‚°
./logs.sh backend -f
```

## AWSæœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯Terraformã‚’ä½¿ç”¨ã—ã¦AWSä¸Šã«2ç¨®é¡ã®æ§‹æˆã§ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã¾ã™ã€‚

### ãƒ‡ãƒ—ãƒ­ã‚¤ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ¯”è¼ƒ

| æ§‹æˆ | æœˆé¡ã‚³ã‚¹ãƒˆ | ç‰¹å¾´ | æ¨å¥¨ç”¨é€” |
|------|-----------|------|---------|
| **Amplify + App Runner** | $45-65 | ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã€è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã€ãƒ‡ãƒ—ãƒ­ã‚¤ç°¡å˜ | é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆã€ä½ã€œä¸­ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ |
| **ECS Fargate Spot** | $60-85 | ã‚³ãƒ³ãƒ†ãƒŠãƒ™ãƒ¼ã‚¹ã€ã‚¹ãƒãƒƒãƒˆä¾¡æ ¼ã€ALBä»˜ã | é«˜ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã€æœ¬ç•ªç’°å¢ƒ |

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: Amplify + App Runner (è¶…æœ€å®‰å€¤ãƒ»æ¨å¥¨)

**æœˆé¡ ç´„ $45-65**

#### æ§‹æˆ
- **AWS Amplify** (Frontend): å¾“é‡èª²é‡‘ã€è‡ªå‹•CI/CD
- **AWS App Runner** (Backend/Worker): å¾“é‡èª²é‡‘ã€è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
- **RDS PostgreSQL**: db.t4g.micro (æœ€å°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹)
- **ElastiCache Redis**: cache.t4g.micro (æœ€å°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹)

#### åˆ©ç‚¹
- ECS Fargateã‚ˆã‚Š20-30%å®‰ä¾¡
- ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ (ç®¡ç†ä¸è¦)
- ãƒ‡ãƒ—ãƒ­ã‚¤ãŒéå¸¸ã«ç°¡å˜
- ALBä¸è¦ (ã‚³ã‚¹ãƒˆå‰Šæ¸›)
- è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°

#### ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

```bash
# 1. AWSèªè¨¼è¨­å®š
aws configure

# 2. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
cp infrastructure/amplify/terraform.tfvars.example infrastructure/amplify/terraform.tfvars
vi infrastructure/amplify/terraform.tfvars

# 3. ãƒ‡ãƒ—ãƒ­ã‚¤
./deploy-amplify.sh init
./deploy-amplify.sh apply
./deploy-amplify.sh build
./deploy-amplify.sh redeploy

# 4. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: Amplifyã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ãƒªãƒã‚¸ãƒˆãƒªæ¥ç¶š
```

è©³ç´°ã¯ `./deploy-amplify.sh help` ã‚’å‚ç…§ã€‚

---

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: ECS Fargate Spot (é«˜ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯å‘ã‘)

**æœˆé¡ ç´„ $60-85**

#### æ§‹æˆ
- **ECS Fargate Spot**: ã‚¹ãƒãƒƒãƒˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§æœ€å¤§70%ã‚³ã‚¹ãƒˆå‰Šæ¸›
- **RDS PostgreSQL**: db.t4g.micro (æœ€å°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹)
- **ElastiCache Redis**: cache.t4g.micro (æœ€å°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹)
- **Application Load Balancer**: HTTPã‚¢ã‚¯ã‚»ã‚¹å¯¾å¿œ

#### ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

```bash
# 1. AWSèªè¨¼è¨­å®š
aws configure

# 2. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
cp infrastructure/terraform/terraform.tfvars.example infrastructure/terraform/terraform.tfvars
vi infrastructure/terraform/terraform.tfvars

# 3. ãƒ‡ãƒ—ãƒ­ã‚¤
./deploy.sh init
./deploy.sh apply
./deploy.sh build
```

è©³ç´°ã¯ `./deploy.sh help` ã¾ãŸã¯ `DEPLOY.md` ã‚’å‚ç…§ã€‚

---

## ãƒ‡ãƒ—ãƒ­ã‚¤è©³ç´°æƒ…å ±

### å‰ææ¡ä»¶

```bash
# å¿…è¦ãªãƒ„ãƒ¼ãƒ«
- Terraform >= 1.0
- AWS CLI
- Docker

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
terraform --version
aws --version
docker --version
```

### ECS Fargateè©³ç´°æ‰‹é †

#### 1. AWSèªè¨¼æƒ…å ±ã®è¨­å®š

```bash
aws configure
# AWS Access Key ID ã‚’å…¥åŠ›
# AWS Secret Access Key ã‚’å…¥åŠ›
# ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å…¥åŠ› (ä¾‹: ap-northeast-1)
```

#### 2. Terraformè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æº–å‚™

```bash
# terraform.tfvarsã®ä½œæˆ
cp infrastructure/terraform/terraform.tfvars.example infrastructure/terraform/terraform.tfvars

# terraform.tfvarsã‚’ç·¨é›†
vi infrastructure/terraform/terraform.tfvars
```

å¿…é ˆè¨­å®šé …ç›®:
- `db_password`: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
- `secret_key`: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼

#### 3. Terraformã®åˆæœŸåŒ–

```bash
./deploy.sh init
```

#### 4. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ—ãƒ©ãƒ³ã®ç¢ºèª

```bash
./deploy.sh plan
```

#### 5. ã‚¤ãƒ³ãƒ•ãƒ©ã®ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
./deploy.sh apply
```

ãƒ‡ãƒ—ãƒ­ã‚¤ã«ã¯10-15åˆ†ç¨‹åº¦ã‹ã‹ã‚Šã¾ã™ã€‚å®Œäº†ã™ã‚‹ã¨ä»¥ä¸‹ã®æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã¾ã™:
- Frontend URL
- Backend API URL
- ECS Clusterå

#### 6. Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰ã¨ãƒ—ãƒƒã‚·ãƒ¥

```bash
./deploy.sh build
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™:
- Backendã¨Frontendã®Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰
- AWS ECRã«ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ—ãƒƒã‚·ãƒ¥

#### 7. ECSã‚µãƒ¼ãƒ“ã‚¹ã®å†èµ·å‹•

```bash
# æ–°ã—ã„ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’é©ç”¨ã™ã‚‹ãŸã‚ã‚µãƒ¼ãƒ“ã‚¹ã‚’å†èµ·å‹•
aws ecs update-service --cluster sns-orchestrator-cluster \
  --service sns-orchestrator-backend --force-new-deployment

aws ecs update-service --cluster sns-orchestrator-cluster \
  --service sns-orchestrator-frontend --force-new-deployment

aws ecs update-service --cluster sns-orchestrator-cluster \
  --service sns-orchestrator-worker --force-new-deployment
```

#### 8. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–

```bash
# ECSã‚¿ã‚¹ã‚¯ã«æ¥ç¶šã—ã¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆæœŸåŒ–
# (ã¾ãšã€ECS Execã‚’æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™)
aws ecs execute-command --cluster sns-orchestrator-cluster \
  --task <backend-task-id> --container backend --interactive \
  --command "/bin/bash"

# ã‚³ãƒ³ãƒ†ãƒŠå†…ã§å®Ÿè¡Œ
python -c "from app.models.database import init_db; import asyncio; asyncio.run(init_db())"
```

### deploy.shã‚³ãƒãƒ³ãƒ‰ä¸€è¦§

```bash
./deploy.sh init      # Terraformã®åˆæœŸåŒ– (åˆå›ã®ã¿)
./deploy.sh plan      # ãƒ‡ãƒ—ãƒ­ã‚¤è¨ˆç”»ã®ç¢ºèª
./deploy.sh apply     # ã‚¤ãƒ³ãƒ•ãƒ©ã®ãƒ‡ãƒ—ãƒ­ã‚¤
./deploy.sh build     # Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰ã¨ãƒ—ãƒƒã‚·ãƒ¥
./deploy.sh destroy   # å…¨ãƒªã‚½ãƒ¼ã‚¹ã®å‰Šé™¤
./deploy.sh status    # ç¾åœ¨ã®ãƒ‡ãƒ—ãƒ­ã‚¤çŠ¶æ…‹ã®ç¢ºèª
./deploy.sh cost      # æœˆé¡ã‚³ã‚¹ãƒˆæ¦‚ç®—ã®è¡¨ç¤º
./deploy.sh help      # ãƒ˜ãƒ«ãƒ—è¡¨ç¤º
```

### ãƒªã‚½ãƒ¼ã‚¹ã®å‰Šé™¤

```bash
./deploy.sh destroy
```

ã™ã¹ã¦ã®AWSãƒªã‚½ãƒ¼ã‚¹ãŒå‰Šé™¤ã•ã‚Œã¾ã™ã€‚ç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§`yes`ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚

### ã‚³ã‚¹ãƒˆæœ€é©åŒ–ã®ãƒã‚¤ãƒ³ãƒˆ

1. **Fargate Spotä½¿ç”¨**: é€šå¸¸ã®70%ã®ã‚³ã‚¹ãƒˆã§å®Ÿè¡Œ
2. **æœ€å°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚µã‚¤ã‚º**: db.t4g.micro, cache.t4g.micro
3. **Container Insightsç„¡åŠ¹**: CloudWatchè¿½åŠ èª²é‡‘ãªã—
4. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æœ€å°åŒ–**: 1æ—¥åˆ†ã®ã¿ä¿æŒ
5. **ãƒ­ã‚°ä¿æŒæœŸé–“çŸ­ç¸®**: 7æ—¥é–“ã®ã¿

### æ³¨æ„äº‹é …

- **ã‚¹ãƒãƒƒãƒˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä¸­æ–­**: Fargate Spotã¯éœ€è¦ãŒé«˜ã„æ™‚ã«ä¸­æ–­ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™
- **æœ¬ç•ªç’°å¢ƒã§ã®æ¨å¥¨äº‹é …**:
  - äºˆç´„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®æ¤œè¨
  - ãƒãƒ«ãƒAZæ§‹æˆ
  - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æœŸé–“ã®å»¶é•·
  - CloudWatch Container Insightsã®æœ‰åŠ¹åŒ–
  - AWS WAFã®è¿½åŠ 
  - Route 53ã§ã®ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®š

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### Terraformã‚¨ãƒ©ãƒ¼

```bash
# çŠ¶æ…‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ­ãƒƒã‚¯è§£é™¤
cd infrastructure/terraform
terraform force-unlock <lock-id>

# çŠ¶æ…‹ã®ç¢ºèª
terraform show
```

#### ECSã‚¿ã‚¹ã‚¯ãŒèµ·å‹•ã—ãªã„

```bash
# ãƒ­ã‚°ã®ç¢ºèª
aws logs tail /ecs/sns-orchestrator --follow

# ã‚¿ã‚¹ã‚¯ã®è©³ç´°ç¢ºèª
aws ecs describe-tasks --cluster sns-orchestrator-cluster --tasks <task-id>
```

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼

```bash
# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã®ç¢ºèª
aws ec2 describe-security-groups --group-ids <sg-id>

# RDSã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ç¢ºèª
cd infrastructure/terraform
terraform output rds_endpoint
```

## é–‹ç™º

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º (Dockerä¸ä½¿ç”¨)

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
```bash
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
uvicorn app.main:app --reload
```

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
```bash
cd frontend
npm install
npm run dev
```

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# Backend tests
cd backend
pytest

# Frontend tests
cd frontend
npm test
```

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

Private - å†…éƒ¨ä½¿ç”¨ã®ã¿

## ã‚µãƒãƒ¼ãƒˆ

å•é¡Œã‚„è³ªå•ãŒã‚ã‚‹å ´åˆã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†è€…ã«é€£çµ¡ã—ã¦ãã ã•ã„ã€‚

## ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´

- v1.3.0 (2025-01-05)
  - åˆæœŸãƒªãƒªãƒ¼ã‚¹
  - 4ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ
  - 16åˆ†é¡ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
  - WORMç›£æŸ»ãƒ­ã‚°å®Ÿè£…
  - AIç”Ÿæˆæ©Ÿèƒ½çµ±åˆ
